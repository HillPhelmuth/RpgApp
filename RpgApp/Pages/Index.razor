@page "/"
@using TurnBasedRpg.StateManager
@inject AppStateManager AppStateManager
<MatTabGroup @bind-ActiveIndex="indexTab">
   
        <MatTab Label="Generate Character">
            <GamePlayPrimary />
        </MatTab>
        <MatTab Label="Data Query Testing">
            <TestQueries />
        </MatTab>
        <MatTab Label="MyLayout">
            <LayoutMyCss />
        </MatTab>
        <MatTab Label="Home page Tab">
            
        </MatTab>
        <MatTab Label="Test Page">
            @if (AppStateManager.CurrentPlayer == null)
            {
                <MatH3 Style="color:red">Error!</MatH3>
                <MatH5>Visit Query tester page and Select a default player before returning</MatH5>
            }
            else
            {
                <TestPage />
            }

        </MatTab>
        <MatTab Label="D&D API Dev Tools">
            <CheatCreate/>
        </MatTab>
</MatTabGroup>
@code
{
    protected int indexTab = 0;

    protected override Task OnInitializedAsync()
    {
        AppStateManager.OnTabChange += UpdateTab;
        return base.OnInitializedAsync();
    }

    protected async void UpdateTab()
    {
        indexTab = AppStateManager.IndexTab;
        await InvokeAsync(StateHasChanged);
    }
    
}
